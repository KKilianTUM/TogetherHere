<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TogetherHere — Activities</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&family=Quicksand:wght@600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --primary-blue:#3A73FF;
      --light-blue:#E8F0FF;
      --text:#1C1F25;
      --bg:#FFFFFF;

      /* NEW brand colors */
      --brand-glow:#98B400;
      --brand-together:#A65F62;
      --brand-here:#CBB888;

      --r-card:16px;
      --r-btn:22px;
      --shadow: 0 8px 22px rgba(0,0,0,.08);
      --shadow-hover: 0 12px 28px rgba(58,115,255,.18);
      --border: 1px solid rgba(0,0,0,.06);

      /* Participants bar look (closer to your screenshot) */
      --bar-track:#D9D9D9;
      --bar-fill:#63C66B;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family:Poppins, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background:var(--bg);
      color:var(--text);
    }
    h1,h2,h3{ font-family:Quicksand, Poppins, sans-serif; margin:0; }
    button{ font-family:inherit; }

    .container{ width:min(1180px, 92vw); margin:0 auto; }

    /* Top Nav */
    .nav{
      position:sticky; top:0; z-index:20;
      background:rgba(255,255,255,.9);
      backdrop-filter: blur(10px);
      border-bottom: var(--border);
    }
    .nav-inner{
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 0;
    }
    .brand{ display:flex; align-items:center; gap:10px; font-weight:700; }
    .brand-logo{
      width:28px; height:28px;
      border-radius:999px;
      object-fit:cover;
      box-shadow:0 0 0 4px rgba(152,180,0,.30);
      display:block;
      background:#eee;
    }
    .brand-name{
      display:flex;
      align-items:baseline;
      gap:0;
      font-weight:700;
      letter-spacing:-.2px;
    }
    .brand-name .together{ color:var(--brand-together); }
    .brand-name .here{ color:var(--brand-here); }

    .nav-actions{ display:flex; align-items:center; gap:10px; }
    .icon-btn{
      width:40px; height:40px;
      border-radius:999px;
      border: var(--border);
      background:white;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      transition:.18s ease;
    }
    .icon-btn:hover{
      border-color: rgba(58,115,255,.35);
      box-shadow:0 10px 24px rgba(58,115,255,.12);
    }
    .lang{
      padding:0 12px;
      height:40px;
      border-radius:999px;
      border: var(--border);
      background:white;
      cursor:pointer;
      font-weight:500;
      transition:.18s ease;
    }
    .lang:hover{ border-color: rgba(58,115,255,.35); box-shadow:0 10px 24px rgba(58,115,255,.10); }

    /* Page header */
    .page-head{ padding:22px 0 8px; }
    .page-head h1{ font-size:28px; letter-spacing:-.2px; }
    .muted{ color:rgba(28,31,37,.72); font-size:14px; margin:6px 0 0; }

    /* Category rows */
    .category{ padding:18px 0; }
    .category-title{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px;
      margin-bottom:10px;
    }
    .category-title h2{ font-size:20px; }
    .hint{ font-size:12px; color:rgba(28,31,37,.6); }

    .slider-row{
      display:flex;
      gap:14px;
      overflow-x:auto;
      padding:6px 2px 14px;
      scroll-behavior:smooth;
      -webkit-overflow-scrolling: touch;
    }
    .slider-row::-webkit-scrollbar{ height:8px; }
    .slider-row::-webkit-scrollbar-thumb{
      background: var(--light-blue);
      border-radius: 999px;
    }

    /* Activity cards */
    .card{
      flex: 0 0 auto;
      width: 240px;
      background:white;
      border-radius: var(--r-card);
      border: var(--border);
      box-shadow: var(--shadow);
      overflow:hidden;
      transition:.18s ease;
      display:flex;
      flex-direction:column;
    }
    .card:hover{
      transform: translateY(-2px);
      box-shadow: var(--shadow-hover);
    }
    .card img{
      width:100%;
      height:140px;
      object-fit:cover;
      display:block;
      background:#eee;
    }
    .card-body{
      padding:12px 12px 14px;
      display:flex;
      flex-direction:column;
      flex:1;
    }
    .card h3{
      font-size:15px;
      line-height:1.25;
      margin:0 0 6px;
    }
    .card p{
      margin:0 0 10px;
      font-size:13px;
      color:rgba(28,31,37,.72);
      line-height:1.35;
      min-height:34px; /* keeps layout stable */
    }

    /* Aligned meta (place/time) across cards */
    .meta{
      margin-top:auto;
      display:flex;
      flex-direction:column;
      gap:6px;
      font-size:12px;
      color:rgba(28,31,37,.62);
      margin-bottom:10px;
      min-height:38px; /* ensures same height */
    }
    .meta-line{
      display:flex;
      align-items:center;
      gap:6px;
      line-height:1.2;
      min-height:16px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .dot-sep{ opacity:.6; }

    /* Card participant pill */
    .count{
      font-size:12px;
      color:rgba(28,31,37,.62);
      background: rgba(232,240,255,.55);
      border: 1px solid rgba(58,115,255,.14);
      padding:8px 10px;
      border-radius:14px;
      margin-bottom:10px;
      min-height:38px;              /* aligns across cards */
      display:flex;
      align-items:center;
    }

    .more{
      width:100%;
      border:none;
      cursor:pointer;
      padding:10px 12px;
      border-radius: var(--r-btn);
      background: var(--primary-blue);
      color:white;
      font-weight:500;
      transition:.18s ease;
      min-height:42px;              /* aligns across cards */
    }
    .more:hover{ filter: brightness(.96); }

    /* Modal */
    .modal-backdrop{
      position:fixed; inset:0;
      background: rgba(0,0,0,.45);
      display:none;
      align-items:center;
      justify-content:center;
      padding:16px;
      z-index:50;
    }
    .modal{
      width:min(820px, 96vw);                 /* smaller overall */
      background:white;
      border-radius: 16px;
      overflow:hidden;
      border: var(--border);
      box-shadow: 0 28px 80px rgba(0,0,0,.30);
      display:grid;
      grid-template-columns: 1fr 1fr;
      min-height: 420px;                      /* smaller overall */
    }
    @media (max-width: 860px){
      .modal{ grid-template-columns: 1fr; }
    }

    .modal-media{
      background:#f3f5f8;
      padding:14px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .modal-media img{
      width:100%;
      height:240px;                 /* DO NOT shrink further */
      object-fit:cover;
      display:block;
      border-radius:14px;
      background:#eee;
    }

    /* NEW: host + participants UNDER image (no blue boxes) */
    .media-under{
      display:flex;
      flex-direction:column;
      gap:10px;
      padding:2px 2px 0;
    }
    .host-line{
      font-size:13px;
      color:rgba(28,31,37,.72);
    }
    .host-line b{
      font-weight:600;
      color:rgba(28,31,37,.86);
    }

    .participants-under{
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .ptext-inline{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      font-size:13px;
      color:rgba(28,31,37,.78);
    }
    .ptext-inline b{ font-weight:600; color:rgba(28,31,37,.86); }

    /* NEW: bar style closer to screenshot */
    .pbar{
      height:16px;
      background: var(--bar-track);
      border-radius:999px;
      overflow:hidden;
    }
    .pbar > div{
      height:100%;
      width:0%;
      background: var(--bar-fill);
      border-radius:999px;
    }

    .modal-content{
      padding:14px 14px 14px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .modal-top{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
    }
    .modal-title{
      font-size:18px;
      letter-spacing:-.2px;
      margin:0;
    }
    .close{
      width:38px; height:38px;
      border-radius:999px;
      border: var(--border);
      background:white;
      cursor:pointer;
    }
    .close:hover{ border-color: rgba(58,115,255,.35); }

    .modal-desc{
      margin:0;
      font-size:13px;
      color:rgba(28,31,37,.78);
      line-height:1.5;
    }

    /* NEW: Location + Date/Time side-by-side, half-height boxes */
    .fact-grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media (max-width: 860px){
      .fact-grid{ grid-template-columns: 1fr; }
    }

    .fact{
      background: rgba(232,240,255,.55);
      border: 1px solid rgba(58,115,255,.14);
      padding:8px 10px;             /* smaller */
      border-radius:12px;           /* slightly smaller */
    }
    .fact-title{
      font-size:11px;
      color:rgba(28,31,37,.62);
      margin-bottom:1px;
    }
    .fact-value{ font-size:12.5px; color:rgba(28,31,37,.82); }

    /* clickable facts */
    .fact-link{ cursor:pointer; }
    .fact-link:hover{
      border-color: rgba(58,115,255,.35);
      box-shadow:0 10px 24px rgba(58,115,255,.10);
    }
    .calendar-hint{
      margin-top:3px;
      font-size:11px;
      color:rgba(28,31,37,.58);
    }

    /* Requirements section */
    .req{
      background: rgba(232,240,255,.35);
      border: 1px solid rgba(58,115,255,.12);
      border-radius:12px;
      padding:10px 10px;
    }
    .req h4{
      margin:0 0 4px;
      font-size:13px;
      color:rgba(28,31,37,.82);
      letter-spacing:-.1px;
      font-family:Quicksand, Poppins, sans-serif;
    }
    .req p{
      margin:0;
      font-size:13px;
      color:rgba(28,31,37,.72);
      line-height:1.45;
    }

    .modal-actions{
      margin-top:auto;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .btn{
      border-radius: var(--r-btn);
      padding:10px 14px;
      border:1.5px solid transparent;
      cursor:pointer;
      font-weight:500;
    }
    .btn-primary{ background: var(--primary-blue); color:white; }
    .btn-ghost{
      background:white;
      color: var(--primary-blue);
      border-color: rgba(58,115,255,.45);
    }
    .btn-primary:hover{ filter: brightness(.96); }
    .btn-ghost:hover{ box-shadow:0 10px 24px rgba(58,115,255,.12); }

    /* Small helper */
    .sr-only{
      position:absolute; width:1px; height:1px; padding:0; margin:-1px;
      overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
    }
  </style>
</head>

<body>
  <header class="nav">
    <div class="container nav-inner">
      <div class="brand">
        <img class="brand-logo" src="/images/logo1-TH.jpeg" alt="TogetherHere logo">
        <span class="brand-name" aria-label="TogetherHere">
          <span class="together">Together</span><span class="here">Here</span>
        </span>
      </div>

      <div class="nav-actions">
        <button class="lang" type="button" aria-label="Region selector">Munich ▾</button>
        <button class="lang" type="button" aria-label="Language selector">EN ▾</button>

        <button class="icon-btn" type="button" title="Profile (visual only)" aria-label="Profile">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M12 12a4.5 4.5 0 1 0-4.5-4.5A4.5 4.5 0 0 0 12 12Z" stroke="#3A73FF" stroke-width="2"/>
            <path d="M20 21a8 8 0 1 0-16 0" stroke="#3A73FF" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>

        <a class="icon-btn" href="index.html" title="Logout (prototype link)" aria-label="Logout">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M10 17l5-5-5-5" stroke="#3A73FF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M15 12H3" stroke="#3A73FF" stroke-width="2" stroke-linecap="round"/>
            <path d="M21 21V3" stroke="#3A73FF" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </a>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="page-head">
      <h1>Activities</h1>
      <p class="muted">Scroll categories horizontally. Click “More” to open details.</p>
    </section>

    <!-- Categories -->
    <section class="category">
      <div class="category-title">
        <h2>Getting to Know the City</h2>
        <span class="hint">Landmarks • Castles • Attractions</span>
      </div>

      <div class="slider-row">
        <article class="card"
          data-title="Nymphenburg Palace Visit"
          data-meet="Marienplatz (Fischbrunnen)"
          data-maps="Marienplatz Fischbrunnen, München"
          data-datetime="2026-01-17T13:00"
          data-duration="150"
          data-initiator="Initiated by Lina"
          data-requirements="Comfortable shoes. Optional: bring a public transport ticket (MVV)."
          data-desc="We visit Nymphenburg Palace together and walk through the gardens. This is a calm and easy activity with no rush. You can enjoy the surroundings and take photos if you like. Perfect if you want to explore the city together with others."
          data-img="/images/nymphenburg-TH.jpeg"
          data-label="Participants"
          data-signed="5"
          data-needed="12">
          <img alt="City landmark" src="/images/nymphenburg-TH.jpeg">
          <div class="card-body">
            <h3>Nymphenburg Palace Visit</h3>
            <p>Visit a famous palace and enjoy the gardens.</p>
            <div class="meta">
              <div class="meta-line"><span>Meet:</span><span>Marienplatz</span></div>
              <div class="meta-line"><span>Sat, 17 Jan</span><span class="dot-sep">•</span><span>13:00</span></div>
            </div>
            <div class="count" data-count-ui></div>
            <button class="more" type="button">More</button>
          </div>
        </article>

        <article class="card"
          data-title="Marienplatz Walk"
          data-meet="Karlsplatz (Stachus)"
          data-maps="Karlsplatz Stachus, München"
          data-datetime="2026-01-18T11:00"
          data-duration="75"
          data-initiator="Initiated by Omar"
          data-requirements="None."
          data-desc="We take a relaxed walk around Marienplatz and nearby streets. The focus is on getting to know the city center. There is no fixed plan and no pressure. Just come along and enjoy the walk."
          data-img="/images/marienplatz-TH.jpeg"
          data-label="Participants"
          data-signed="8"
          data-needed="20">
          <img alt="City attraction" src="/images/marienplatz-TH.jpeg">
          <div class="card-body">
            <h3>Marienplatz Walk</h3>
            <p>See the main square and nearby streets.</p>
            <div class="meta">
              <div class="meta-line"><span>Meet:</span><span>Stachus</span></div>
              <div class="meta-line"><span>Sun, 18 Jan</span><span class="dot-sep">•</span><span>11:00</span></div>
            </div>
            <div class="count" data-count-ui></div>
            <button class="more" type="button">More</button>
          </div>
        </article>

        <article class="card"
          data-title="Munich Residenz Courtyard"
          data-meet="Odeonsplatz (Feldherrnhalle)"
          data-maps="Odeonsplatz Feldherrnhalle, München"
          data-datetime="2026-01-20T16:30"
          data-duration="75"
          data-initiator="Initiated by Sara"
          data-requirements="None."
          data-desc="We visit the courtyard of the Munich Residenz together. This activity is quiet and focused on architecture and history. You can look around at your own pace. A good option if you prefer calm meetups."
          data-img="/images/residenz-TH.jpeg"
          data-label="Participants"
          data-signed="4"
          data-needed="10">
          <img alt="Historic building" src="/images/residenz-TH.jpeg">
          <div class="card-body">
            <h3>Munich Residenz Courtyard</h3>
            <p>Calm meetup focused on architecture.</p>
            <div class="meta">
              <div class="meta-line"><span>Meet:</span><span>Odeonsplatz</span></div>
              <div class="meta-line"><span>Tue, 20 Jan</span><span class="dot-sep">•</span><span>16:30</span></div>
            </div>
            <div class="count" data-count-ui></div>
            <button class="more" type="button">More</button>
          </div>
        </article>

        <article class="card"
          data-title="Castle Neuschwanstein (Day Trip)"
          data-meet="München Hbf (Main Hall)"
          data-maps="München Hauptbahnhof, München"
          data-datetime="2026-01-24T07:40"
          data-duration="600"
          data-initiator="Initiated by Ali"
          data-requirements="Public transport ticket. Comfortable shoes. Bring water/snacks."
          data-desc="We take a simple day trip by public transport to Castle Neuschwanstein. We meet centrally, travel together, and keep it relaxed. Perfect if you want an easy, guided-like day with others—no stress, no pressure."
          data-img="/images/neuschwanstein-TH.jpeg"
          data-label="Participants"
          data-signed="6"
          data-needed="9">
          <img alt="Castle" src="/images/neuschwanstein-TH.jpeg">
          <div class="card-body">
            <h3>Castle Neuschwanstein (Day Trip)</h3>
            <p>Historic Bavarian landmark via public transport.</p>
            <div class="meta">
              <div class="meta-line"><span>Meet:</span><span>München Hbf</span></div>
              <div class="meta-line"><span>Sat, 24 Jan</span><span class="dot-sep">•</span><span>07:40</span></div>
            </div>
            <div class="count" data-count-ui></div>
            <button class="more" type="button">More</button>
          </div>
        </article>

        <article class="card"
          data-title="Olympiapark Walk & Viewpoints"
          data-meet="Sendlinger Tor"
          data-maps="Sendlinger Tor, München"
          data-datetime="2026-01-22T15:30"
          data-duration="90"
          data-initiator="Initiated by Farah"
          data-requirements="None."
          data-desc="We meet and then go to Olympiapark for a relaxed walk through the park. We stop at a few viewpoints and enjoy the atmosphere. There is no fixed route and no pressure to talk. A calm way to explore Munich together."
          data-img="/images/olympiapark-TH.jpeg"
          data-label="Participants"
          data-signed="3"
          data-needed="14">
          <img alt="City park" src="/images/olympiapark-TH.jpeg">
          <div class="card-body">
            <h3>Olympiapark Walk & Viewpoints</h3>
            <p>Easy walk with viewpoints and open pace.</p>
            <div class="meta">
              <div class="meta-line"><span>Meet:</span><span>Sendlinger Tor</span></div>
              <div class="meta-line"><span>Thu, 22 Jan</span><span class="dot-sep">•</span><span>15:30</span></div>
            </div>
            <div class="count" data-count-ui></div>
            <button class="more" type="button">More</button>
          </div>
        </article>

        <article class="card"
          data-title="Englischer Garten Landmark Walk"
          data-meet="Universität (LMU Entrance)"
          data-maps="Ludwig-Maximilians-Universität München"
          data-datetime="2026-01-25T10:30"
          data-duration="80"
          data-initiator="Initiated by Jonas"
          data-requirements="None."
          data-desc="We meet near the university and then walk into the Englischer Garten to a few well-known spots. The pace is slow and you can join for as long as you like. This is a simple outdoor city activity with lots of space—calm and easy."
          data-img="/images/EnglishGarden-TH.jpeg"
          data-label="Participants"
          data-signed="7"
          data-needed="16">
          <img alt="City garden" src="/images/EnglishGarden-TH.jpeg">
          <div class="card-body">
            <h3>Englischer Garten Landmark Walk</h3>
            <p>Calm city-nature walk with known spots.</p>
            <div class="meta">
              <div class="meta-line"><span>Meet:</span><span>Universität</span></div>
              <div class="meta-line"><span>Sun, 25 Jan</span><span class="dot-sep">•</span><span>10:30</span></div>
            </div>
            <div class="count" data-count-ui></div>
            <button class="more" type="button">More</button>
          </div>
        </article>
      </div>
    </section>

    <section class="category">
      <div class="category-title">
        <h2>Sports</h2>
        <span class="hint">Casual • Friendly</span>
      </div>

      <div class="slider-row">
        <article class="card"
          data-title="Casual Football Kickabout"
          data-meet="Gärtnerplatz"
          data-maps="Gärtnerplatz, München"
          data-datetime="2026-01-19T18:00"
          data-duration="90"
          data-initiator="Initiated by Ben"
          data-requirements="Sports shoes. Optional: bring a bottle of water."
          data-desc="This is a relaxed football meetup for all levels. You can join even if you haven’t played in a long time. The focus is on fun, not competition. Come as you are and play a bit."
          data-img="/images/football-TH.jpeg"
          data-label="Participants"
          data-signed="10"
          data-needed="16">
          <img alt="Football field" src="/images/football-TH.jpeg">
          <div class="card-body">
            <h3>Casual Football Kickabout</h3>
            <p>Easy match — just join and play.</p>
            <div class="meta">
              <div class="meta-line"><span>Meet:</span><span>Gärtnerplatz</span></div>
              <div class="meta-line"><span>Mon, 19 Jan</span><span class="dot-sep">•</span><span>18:00</span></div>
            </div>
            <div class="count" data-count-ui></div>
            <button class="more" type="button">More</button>
          </div>
        </article>

        <article class="card"
          data-title="Park Jog (Beginner)"
          data-meet="Münchner Freiheit"
          data-maps="Münchner Freiheit, München"
          data-datetime="2026-01-21T07:30"
          data-duration="45"
          data-initiator="Initiated by Mia"
          data-requirements="Running shoes. Beginner-friendly."
          data-desc="We go for an easy jog together in the park. The pace is slow and suitable for beginners. There is no pressure to keep up. You can stop or walk at any time."
          data-img="/images/jogging-TH.jpeg"
          data-label="Participants"
          data-signed="4"
          data-needed="10">
          <img alt="Running" src="/images/jogging-TH.jpeg">
          <div class="card-body">
            <h3>Park Jog (Beginner)</h3>
            <p>Short route, calm pace.</p>
            <div class="meta">
              <div class="meta-line"><span>Meet:</span><span>M. Freiheit</span></div>
              <div class="meta-line"><span>Wed, 21 Jan</span><span class="dot-sep">•</span><span>07:30</span></div>
            </div>
            <div class="count" data-count-ui></div>
            <button class="more" type="button">More</button>
          </div>
        </article>

        <article class="card"
          data-title="Table Tennis Meetup"
          data-meet="Isartor"
          data-maps="Isartor, München"
          data-datetime="2026-01-23T17:30"
          data-duration="60"
          data-initiator="Initiated by Noor"
          data-requirements="None. If you have a paddle, you can bring it (optional)."
          data-desc="We meet to play casual table tennis together. You don’t need special skills or experience. Games are short and friendly. It’s a simple way to be active and meet people."
          data-img="/images/tabletennis-TH.jpeg"
          data-label="Participants"
          data-signed="6"
          data-needed="12">
          <img alt="Table tennis" src="/images/tabletennis-TH.jpeg">
          <div class="card-body">
            <h3>Table Tennis Meetup</h3>
            <p>Quick games, friendly vibe.</p>
            <div class="meta">
              <div class="meta-line"><span>Meet:</span><span>Isartor</span></div>
              <div class="meta-line"><span>Fri, 23 Jan</span><span class="dot-sep">•</span><span>17:30</span></div>
            </div>
            <div class="count" data-count-ui></div>
            <button class="more" type="button">More</button>
          </div>
        </article>

        <article class="card"
          data-title="Basketball (Casual)"
          data-meet="Odeonsplatz"
          data-maps="Odeonsplatz, München"
          data-datetime="2026-01-26T19:00"
          data-duration="75"
          data-initiator="Initiated by Leo"
          data-requirements="Sports shoes."
          data-desc="We meet at an outdoor court to play basketball. This is a relaxed and friendly session. You can join for shooting or short games. Everyone is welcome."
          data-img="/images/basketball-TH.jpeg"
          data-label="Participants"
          data-signed="5"
          data-needed="12">
          <img alt="Basketball court" src="/images/basketball-TH.jpeg">
          <div class="card-body">
            <h3>Basketball (Casual)</h3>
            <p>Relaxed meetup at the court.</p>
            <div class="meta">
              <div class="meta-line"><span>Meet:</span><span>Odeonsplatz</span></div>
              <div class="meta-line"><span>Mon, 26 Jan</span><span class="dot-sep">•</span><span>19:00</span></div>
            </div>
            <div class="count" data-count-ui></div>
            <button class="more" type="button">More</button>
          </div>
        </article>

        <article class="card"
          data-title="Badminton (Casual Doubles)"
          data-meet="Hauptbahnhof"
          data-maps="München Hauptbahnhof, München"
          data-datetime="2026-01-28T18:30"
          data-duration="90"
          data-initiator="Initiated by Noor"
          data-requirements="Indoor sports shoes. If you have a racket, bring it (optional)."
          data-desc="We play casual badminton in a friendly atmosphere. You can join even if you are new to the sport. We rotate partners and keep everything relaxed. Come for a bit of movement and an easy meetup."
          data-img="/images/badminton-TH.jpeg"
          data-label="Participants"
          data-signed="8"
          data-needed="16">
          <img alt="Badminton" src="/images/badminton-TH.jpeg">
          <div class="card-body">
            <h3>Badminton (Casual Doubles)</h3>
            <p>Friendly games, relaxed pace.</p>
            <div class="meta">
              <div class="meta-line"><span>Meet:</span><span>Hbf</span></div>
              <div class="meta-line"><span>Wed, 28 Jan</span><span class="dot-sep">•</span><span>18:30</span></div>
            </div>
            <div class="count" data-count-ui></div>
            <button class="more" type="button">More</button>
          </div>
        </article>

        <article class="card"
          data-title="Stretch & Mobility Session"
          data-meet="Viktualienmarkt"
          data-maps="Viktualienmarkt, München"
          data-datetime="2026-01-31T09:30"
          data-duration="60"
          data-initiator="Initiated by Lea"
          data-requirements="Comfortable clothing. Bring a small towel or mat if you have one (optional)."
          data-desc="We do a simple stretch and mobility session together. The movements are easy and suitable for beginners. You can follow along at your own pace and take breaks anytime. A calm way to feel better and meet people without pressure."
          data-img="/images/yoga-TH.jpeg"
          data-label="Participants"
          data-signed="9"
          data-needed="14">
          <img alt="Stretching" src="/images/yoga-TH.jpeg">
          <div class="card-body">
            <h3>Stretch & Mobility Session</h3>
            <p>Easy stretching, beginner-friendly.</p>
            <div class="meta">
              <div class="meta-line"><span>Meet:</span><span>Viktualienmarkt</span></div>
              <div class="meta-line"><span>Sat, 31 Jan</span><span class="dot-sep">•</span><span>09:30</span></div>
            </div>
            <div class="count" data-count-ui></div>
            <button class="more" type="button">More</button>
          </div>
        </article>
      </div>
    </section>

    <!-- (rest of your categories unchanged) -->

    <section class="category">
      <div class="category-title">
        <h2>Language & Learning</h2>
        <span class="hint">Practice • Support</span>
      </div>

      <div class="slider-row">
        <article class="card"
          data-title="Language Exchange (Café)"
          data-meet="Sendlinger Tor"
          data-maps="Sendlinger Tor, München"
          data-datetime="2026-01-27T17:00"
          data-duration="75"
          data-initiator="Initiated by Hanna"
          data-requirements="None."
          data-desc="We meet in a café to practice languages together. The atmosphere is relaxed and friendly. You can speak as much or as little as you want. Mistakes are completely okay."
          data-img="/images/cafe-TH.jpeg"
          data-label="Participants"
          data-signed="6"
          data-needed="12">
          <img alt="Cafe" src="/images/cafe-TH.jpeg">
          <div class="card-body">
            <h3>Language Exchange (Café)</h3>
            <p>Easy conversation practice.</p>
            <div class="meta">
              <div class="meta-line"><span>Meet:</span><span>Sendlinger Tor</span></div>
              <div class="meta-line"><span>Tue, 27 Jan</span><span class="dot-sep">•</span><span>17:00</span></div>
            </div>
            <div class="count" data-count-ui></div>
            <button class="more" type="button">More</button>
          </div>
        </article>

        <article class="card"
          data-title="Homework / Study Session"
          data-meet="Universität"
          data-maps="Universität (U-Bahn), München"
          data-datetime="2026-01-29T16:00"
          data-duration="90"
          data-initiator="Initiated by Yusuf"
          data-requirements="Bring your tasks/materials."
          data-desc="Quiet study session. Bring your tasks. Help each other if needed."
          data-img="/images/study-TH.jpeg"
          data-label="Participants"
          data-signed="5"
          data-needed="10">
          <img alt="Library" src="/images/study-TH.jpeg">
          <div class="card-body">
            <h3>Homework / Study Session</h3>
            <p>Calm space for learning.</p>
            <div class="meta">
              <div class="meta-line"><span>Meet:</span><span>Universität</span></div>
              <div class="meta-line"><span>Thu, 29 Jan</span><span class="dot-sep">•</span><span>16:00</span></div>
            </div>
            <div class="count" data-count-ui></div>
            <button class="more" type="button">More</button>
          </div>
        </article>

        <article class="card"
          data-title="CV Help (Basics)"
          data-meet="Karlsplatz (Stachus)"
          data-maps="Karlsplatz Stachus, München"
          data-datetime="2026-02-03T18:15"
          data-duration="60"
          data-initiator="Initiated by Elena"
          data-requirements="Bring your CV draft if you have one (optional)."
          data-desc="Simple CV basics. Clear tips. Keep it short and helpful."
          data-img="/images/CV-TH.jpeg"
          data-label="Participants"
          data-signed="7"
          data-needed="12">
          <img alt="Writing" src="/images/CV-TH.jpeg">
          <div class="card-body">
            <h3>CV Help (Basics)</h3>
            <p>Short help session.</p>
            <div class="meta">
              <div class="meta-line"><span>Meet:</span><span>Stachus</span></div>
              <div class="meta-line"><span>Tue, 03 Feb</span><span class="dot-sep">•</span><span>18:15</span></div>
            </div>
            <div class="count" data-count-ui></div>
            <button class="more" type="button">More</button>
          </div>
        </article>

        <article class="card"
          data-title="Beginner German (A1)"
          data-meet="Marienplatz"
          data-maps="Marienplatz, München"
          data-datetime="2026-02-05T17:30"
          data-duration="75"
          data-initiator="Initiated by Karim"
          data-requirements="None."
          data-desc="Simple beginner practice. Focus on basic phrases."
          data-img="https://source.unsplash.com/featured/1200x800/?german,language"
          data-label="Participants"
          data-signed="9"
          data-needed="18">
          <img alt="Learning" src="https://source.unsplash.com/featured/600x420/?language,learning">
          <div class="card-body">
            <h3>Beginner German (A1)</h3>
            <p>Basic phrases and practice.</p>
            <div class="meta">
              <div class="meta-line"><span>Meet:</span><span>Marienplatz</span></div>
              <div class="meta-line"><span>Thu, 05 Feb</span><span class="dot-sep">•</span><span>17:30</span></div>
            </div>
            <div class="count" data-count-ui></div>
            <button class="more" type="button">More</button>
          </div>
        </article>

        <article class="card"
          data-title="German in Daily Life (Simple Practice)"
          data-meet="Viktualienmarkt"
          data-maps="Viktualienmarkt, München"
          data-datetime="2026-02-07T11:00"
          data-duration="75"
          data-initiator="Initiated by Hanna"
          data-requirements="None."
          data-desc="We practice simple German for everyday situations like shopping or appointments. The session is beginner-friendly and you can speak as much as you want. We keep it calm and supportive with no pressure. A good option if you want practical language confidence."
          data-img="/images/daily-german.jpg"
          data-label="Participants"
          data-signed="6"
          data-needed="14">
          <img alt="Learning together" src="/images/daily-german.jpg">
          <div class="card-body">
            <h3>German in Daily Life (Simple Practice)</h3>
            <p>Practical phrases for everyday situations.</p>
            <div class="meta">
              <div class="meta-line"><span>Meet:</span><span>Viktualienmarkt</span></div>
              <div class="meta-line"><span>Sat, 07 Feb</span><span class="dot-sep">•</span><span>11:00</span></div>
            </div>
            <div class="count" data-count-ui></div>
            <button class="more" type="button">More</button>
          </div>
        </article>

        <article class="card"
          data-title="Job Search Basics (Support Session)"
          data-meet="Universität"
          data-maps="Universität (U-Bahn), München"
          data-datetime="2026-02-10T16:30"
          data-duration="75"
          data-initiator="Initiated by Adam"
          data-requirements="Bring any questions you have (optional: bring a laptop)."
          data-desc="We meet to share simple job search tips and basic support. You can bring questions about where to look and how to apply. Everything stays practical and beginner-friendly. Join for a calm session with clear, helpful steps."
          data-img="/images/job-search.jpg"
          data-label="Participants"
          data-signed="4"
          data-needed="12">
          <img alt="Job search" src="/images/job-search.jpg">
          <div class="card-body">
            <h3>Job Search Basics (Support Session)</h3>
            <p>Simple tips and support for applications.</p>
            <div class="meta">
              <div class="meta-line"><span>Meet:</span><span>Universität</span></div>
              <div class="meta-line"><span>Tue, 10 Feb</span><span class="dot-sep">•</span><span>16:30</span></div>
            </div>
            <div class="count" data-count-ui></div>
            <button class="more" type="button">More</button>
          </div>
        </article>
      </div>
    </section>

    <section class="category" style="padding-bottom:44px;">
      <div class="category-title">
        <h2>Arts & Creativity</h2>
        <span class="hint">Create • Chill</span>
      </div>

      <div class="slider-row">
        <article class="card"
          data-title="Simple Painting Session"
          data-meet="Isartor"
          data-maps="Isartor, München"
          data-datetime="2026-02-09T18:00"
          data-duration="90"
          data-initiator="Initiated by Anna"
          data-requirements="None. Materials provided (optional: bring an apron)."
          data-desc="Paint together. No skills needed."
          data-img="https://source.unsplash.com/featured/1200x800/?painting,workshop"
          data-label="Participants"
          data-signed="6"
          data-needed="12">
          <img alt="Painting" src="https://source.unsplash.com/featured/600x420/?painting,workshop">
          <div class="card-body">
            <h3>Simple Painting Session</h3>
            <p>Relaxed painting time.</p>
            <div class="meta">
              <div class="meta-line"><span>Meet:</span><span>Isartor</span></div>
              <div class="meta-line"><span>Mon, 09 Feb</span><span class="dot-sep">•</span><span>18:00</span></div>
            </div>
            <div class="count" data-count-ui></div>
            <button class="more" type="button">More</button>
          </div>
        </article>

        <article class="card"
          data-title="Craft Table Meetup"
          data-meet="Sendlinger Tor"
          data-maps="Sendlinger Tor, München"
          data-datetime="2026-02-16T17:30"
          data-duration="75"
          data-initiator="Initiated by Leo"
          data-requirements="None. Materials provided."
          data-desc="Simple crafts at a table. Chill vibe."
          data-img="https://source.unsplash.com/featured/1200x800/?crafts,workshop"
          data-label="Participants"
          data-signed="8"
          data-needed="16">
          <img alt="Crafts" src="https://source.unsplash.com/featured/600x420/?crafts,workshop">
          <div class="card-body">
            <h3>Craft Table Meetup</h3>
            <p>Easy crafts, friendly.</p>
            <div class="meta">
              <div class="meta-line"><span>Meet:</span><span>Sendlinger Tor</span></div>
              <div class="meta-line"><span>Mon, 16 Feb</span><span class="dot-sep">•</span><span>17:30</span></div>
            </div>
            <div class="count" data-count-ui></div>
            <button class="more" type="button">More</button>
          </div>
        </article>

        <article class="card"
          data-title="Photography Walk (Objects)"
          data-meet="Marienplatz"
          data-maps="Marienplatz, München"
          data-datetime="2026-02-18T16:00"
          data-duration="75"
          data-initiator="Initiated by Lina"
          data-requirements="Phone camera is enough (optional: bring a camera)."
          data-desc="Take simple photos of buildings and objects — no people focus."
          data-img="https://source.unsplash.com/featured/1200x800/?photography,city"
          data-label="Participants"
          data-signed="5"
          data-needed="12">
          <img alt="Photography" src="https://source.unsplash.com/featured/600x420/?photography,city">
          <div class="card-body">
            <h3>Photography Walk (Objects)</h3>
            <p>Buildings, objects, calm pace.</p>
            <div class="meta">
              <div class="meta-line"><span>Meet:</span><span>Marienplatz</span></div>
              <div class="meta-line"><span>Wed, 18 Feb</span><span class="dot-sep">•</span><span>16:00</span></div>
            </div>
            <div class="count" data-count-ui></div>
            <button class="more" type="button">More</button>
          </div>
        </article>

        <article class="card"
          data-title="Music Listening Session"
          data-meet="Odeonsplatz"
          data-maps="Odeonsplatz, München"
          data-datetime="2026-02-20T19:00"
          data-duration="75"
          data-initiator="Initiated by Omar"
          data-requirements="None."
          data-desc="Listen to music and share favorites. Keep it simple."
          data-img="https://source.unsplash.com/featured/1200x800/?music,headphones"
          data-label="Participants"
          data-signed="10"
          data-needed="18">
          <img alt="Music" src="https://source.unsplash.com/featured/600x420/?music,headphones">
          <div class="card-body">
            <h3>Music Listening Session</h3>
            <p>Share songs, relaxed chat.</p>
            <div class="meta">
              <div class="meta-line"><span>Meet:</span><span>Odeonsplatz</span></div>
              <div class="meta-line"><span>Fri, 20 Feb</span><span class="dot-sep">•</span><span>19:00</span></div>
            </div>
            <div class="count" data-count-ui></div>
            <button class="more" type="button">More</button>
          </div>
        </article>
      </div>
    </section>
  </main>

  <!-- Modal -->
  <div class="modal-backdrop" id="modalBackdrop" role="dialog" aria-modal="true" aria-label="Activity details">
    <div class="modal">
      <div class="modal-media">
        <img id="modalImg" alt="Activity image" src="">
        <div class="media-under">
          <div class="host-line" id="modalInitiator"></div>
          <div class="participants-under">
            <div class="ptext-inline">
              <span><b>Participants</b></span>
              <span id="modalCountText"></span>
            </div>
            <div class="pbar" aria-hidden="true"><div id="modalPBar"></div></div>
          </div>
        </div>
      </div>

      <div class="modal-content">
        <div class="modal-top">
          <h3 class="modal-title" id="modalTitle">Title</h3>
          <button class="close" id="modalClose" type="button" aria-label="Close">✕</button>
        </div>

        <p class="modal-desc" id="modalDesc"></p>

        <div class="fact-grid">
          <!-- Location: clickable to open maps -->
          <div class="fact fact-link" id="modalLocation" role="button" tabindex="0" aria-label="Open in Maps">
            <div class="fact-title">Meetup location</div>
            <div class="fact-value" id="modalLocationValue"></div>
            <div class="calendar-hint">Click to open maps</div>
          </div>

          <!-- Date/time: clickable to add to calendar -->
          <div class="fact fact-link" id="modalDateTime" role="button" tabindex="0" aria-label="Add to Calendar">
            <div class="fact-title">Date & time</div>
            <div class="fact-value" id="modalDateTimeValue"></div>
            <div class="calendar-hint">Click to add to your calendar</div>
          </div>
        </div>

        <div class="req">
          <h4>Requirements</h4>
          <p id="modalReq"></p>
        </div>

        <div class="modal-actions">
          <button class="btn btn-primary" type="button">Participate</button>
          <button class="btn btn-ghost" type="button">Save</button>
        </div>

        <span class="sr-only" id="modalHint">Press Escape to close</span>
      </div>
    </div>
  </div>

  <script>
    // Simple modal logic (prototype counter + modal)
    const backdrop = document.getElementById("modalBackdrop");
    const closeBtn = document.getElementById("modalClose");

    const mTitle = document.getElementById("modalTitle");
    const mDesc  = document.getElementById("modalDesc");

    const mLocWrap = document.getElementById("modalLocation");
    const mLocVal  = document.getElementById("modalLocationValue");

    const mDateWrap = document.getElementById("modalDateTime");
    const mDateVal  = document.getElementById("modalDateTimeValue");

    const mInit = document.getElementById("modalInitiator");
    const mCountText = document.getElementById("modalCountText");
    const mPBar = document.getElementById("modalPBar");

    const mReq = document.getElementById("modalReq");
    const mImg  = document.getElementById("modalImg");

    let activeCard = null;

    function safeInt(v, fallback=0){
      const n = parseInt(v, 10);
      return Number.isFinite(n) ? n : fallback;
    }

    function formatCardCount(card){
      const label = card.dataset.label || "Participants";
      const signed = safeInt(card.dataset.signed, 0);
      const needed = safeInt(card.dataset.needed, 0);
      if (needed <= 0) return `${label}: ${signed}`;
      return `${label}: ${signed} / ${needed}`;
    }

    function formatDateNice(isoLocal){
      const d = new Date(isoLocal);
      if (isNaN(d.getTime())) return "";
      const weekday = d.toLocaleDateString("en-GB", { weekday:"short" });
      const day = String(d.getDate()).padStart(2,"0");
      const month = d.toLocaleDateString("en-GB", { month:"short" });
      const time = d.toLocaleTimeString("en-GB", { hour:"2-digit", minute:"2-digit" });
      return `${weekday}, ${day} ${month} • ${time}`;
    }

    function renderModalParticipants(card){
      const signed = safeInt(card.dataset.signed, 0);
      const neededRaw = safeInt(card.dataset.needed, 0);
      const needed = Math.max(1, neededRaw || 1);
      const pct = Math.max(0, Math.min(100, (signed / needed) * 100));
      mCountText.textContent = neededRaw > 0 ? `${signed} / ${neededRaw}` : `${signed}`;
      mPBar.style.width = pct + "%";
    }

    function openModal(card){
      activeCard = card;

      mTitle.textContent = card.dataset.title || "Activity";
      mDesc.textContent  = card.dataset.desc || "";
      mImg.src           = card.dataset.img || card.querySelector("img")?.src || "";

      const meet = (card.dataset.meet || "").trim();
      mLocVal.textContent = meet ? `Meet: ${meet}` : (card.dataset.location || "");

      const dt = (card.dataset.datetime || "").trim();
      mDateVal.textContent = formatDateNice(dt);

      mInit.innerHTML = `<b>Host:</b> ${(card.dataset.initiator || "").trim()}`;

      renderModalParticipants(card);

      mReq.textContent = (card.dataset.requirements || "None.").trim() || "None.";

      backdrop.style.display = "flex";
      document.body.style.overflow = "hidden";
      closeBtn.focus();
    }

    function closeModal(){
      backdrop.style.display = "none";
      document.body.style.overflow = "";
      activeCard = null;
    }

    // Calendar (.ics) download helper
    function toICSDateLocal(dateObj){
      const y = dateObj.getFullYear();
      const m = String(dateObj.getMonth()+1).padStart(2,"0");
      const d = String(dateObj.getDate()).padStart(2,"0");
      const hh = String(dateObj.getHours()).padStart(2,"0");
      const mm = String(dateObj.getMinutes()).padStart(2,"0");
      return `${y}${m}${d}T${hh}${mm}00`;
    }

    function downloadICS({ title, startISO, durationMin, location, description }){
      const start = new Date(startISO);
      if (isNaN(start.getTime())) return;

      const dur = Math.max(15, safeInt(durationMin, 60));
      const end = new Date(start.getTime() + dur * 60 * 1000);

      const dtStart = toICSDateLocal(start);
      const dtEnd   = toICSDateLocal(end);

      const safe = (s="") => String(s)
        .replace(/\\/g, "\\\\")
        .replace(/\n/g, "\\n")
        .replace(/,/g, "\\,")
        .replace(/;/g, "\\;");

      const ics =
`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//TogetherHere//EN
CALSCALE:GREGORIAN
METHOD:PUBLISH
BEGIN:VEVENT
UID:${Date.now()}@togetherhere
DTSTAMP:${toICSDateLocal(new Date())}
DTSTART:${dtStart}
DTEND:${dtEnd}
SUMMARY:${safe(title)}
LOCATION:${safe(location)}
DESCRIPTION:${safe(description)}
END:VEVENT
END:VCALENDAR`;

      const blob = new Blob([ics], { type: "text/calendar;charset=utf-8" });
      const url = URL.createObjectURL(blob);

      const a = document.createElement("a");
      a.href = url;
      a.download = "togetherhere-event.ics";
      document.body.appendChild(a);
      a.click();
      a.remove();

      setTimeout(() => URL.revokeObjectURL(url), 500);
    }

    function handleCalendarAdd(){
      if (!activeCard) return;
      downloadICS({
        title: activeCard.dataset.title || "TogetherHere activity",
        startISO: activeCard.dataset.datetime || "",
        durationMin: activeCard.dataset.duration || "60",
        location: `Meet: ${(activeCard.dataset.meet || "").trim()}`,
        description: activeCard.dataset.desc || ""
      });
    }

    function openMapsForActiveCard(){
      if (!activeCard) return;

      const q = (activeCard.dataset.maps || activeCard.dataset.meet || "").trim();
      if (!q) return;

      const encoded = encodeURIComponent(q);

      const isAppleDevice = /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent);
      const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);

      const appleMapsUrl = `maps://?q=${encoded}`;
      const appleMapsHttp = `https://maps.apple.com/?q=${encoded}`;
      const googleMapsUrl = `https://www.google.com/maps/search/?api=1&query=${encoded}`;

      if (isAppleDevice && isSafari) {
        const w = window.open(appleMapsUrl, "_blank");
        if (!w) window.open(appleMapsHttp, "_blank");
        return;
      }
      window.open(googleMapsUrl, "_blank");
    }

    // Events
    document.addEventListener("click", (e) => {
      const moreBtn = e.target.closest(".more");
      if (moreBtn){
        const card = moreBtn.closest(".card");
        if (card) openModal(card);
      }
      if (e.target === backdrop) closeModal();
    });

    closeBtn.addEventListener("click", closeModal);
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && backdrop.style.display === "flex") closeModal();
    });

    // Clickable Date/Time -> Calendar
    mDateWrap.addEventListener("click", handleCalendarAdd);
    mDateWrap.addEventListener("keydown", (e) => {
      if (e.key === "Enter" || e.key === " ") {
        e.preventDefault();
        handleCalendarAdd();
      }
    });

    // Clickable Location -> Maps
    mLocWrap.addEventListener("click", openMapsForActiveCard);
    mLocWrap.addEventListener("keydown", (e) => {
      if (e.key === "Enter" || e.key === " ") {
        e.preventDefault();
        openMapsForActiveCard();
      }
    });

    // Render the counter UI on each card
    document.querySelectorAll(".card").forEach(card => {
      const ui = card.querySelector("[data-count-ui]");
      if (ui) ui.textContent = formatCardCount(card);
    });
  </script>
</body>
</html>
